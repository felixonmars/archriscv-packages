# Maintainer: Felix Yan <felixonmars@archlinux.org>

pkgname=opensbi
pkgver=1.7
pkgrel=1
pkgdesc='RISC-V Open Source Supervisor Binary Interface'
arch=('riscv64')
url='https://github.com/riscv-software-src/opensbi'
license=('BSD-2-Clause')
makedepends=('git' 'python')
source=("git+https://github.com/riscv-software-src/opensbi.git#tag=v$pkgver")
sha512sums=('81b26b06cf07c577742174b309e6213c66ce3a55fbdf6a6fe5321df7fd0bc87eec415473e1a28ed456a7676f9f9aaf3e710157c7ce33e39c1c01213b0d37c320')

build() {
  cd opensbi
  make PLATFORM=generic
}

package() {
  cd opensbi
  make PLATFORM=generic I="$pkgdir/usr" INSTALL_LIB_PATH=lib install
}
