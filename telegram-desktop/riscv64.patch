--- PKGBUILD
+++ PKGBUILD
@@ -16,8 +16,15 @@ makedepends=('cmake' 'git' 'ninja' 'python' 'range-v3' 'tl-expected' 'microsoft-
              'gobject-introspection' 'boost' 'fmt' 'mm-common' 'perl-xml-parser')
 optdepends=('webkit2gtk: embedded browser features'
             'xdg-desktop-portal: desktop integration')
-source=("https://github.com/telegramdesktop/tdesktop/releases/download/v${pkgver}/tdesktop-${pkgver}-full.tar.gz")
-sha512sums=('be55d3449bf315bdc7b5ca3f1098ccdf103f9aa332d6f92dbdbfc8aede5a183a85d580c56131f42025d5a95f29576009f7d24738f9c466b160a7113f9ca0d15d')
+source=("https://github.com/telegramdesktop/tdesktop/releases/download/v${pkgver}/tdesktop-${pkgver}-full.tar.gz"
+        tdesktop-scudo-rv-fix.patch)
+sha512sums=('be55d3449bf315bdc7b5ca3f1098ccdf103f9aa332d6f92dbdbfc8aede5a183a85d580c56131f42025d5a95f29576009f7d24738f9c466b160a7113f9ca0d15d'
+            'bedfd923f64e66c7562afc6e346d32602d2a3f4190b0b2135940cbaf1014dcb993201bc4cecad56a1add576b32dba14d73cee2f019448182fbf7e7ce5223be0d')
+
+prepare() {
+    cd tdesktop-$pkgver-full
+    patch -p1 -i ../tdesktop-scudo-rv-fix.patch
+}
 
 build() {
     CXXFLAGS+=' -ffat-lto-objects'
