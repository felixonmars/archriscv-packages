--- PKGBUILD
+++ PKGBUILD
@@ -22,7 +22,6 @@ depends=(
   'abseil-cpp'
 )
 makedepends=(
-  'bazel'
   'cmake'
   'gtest'
   'python-build'
@@ -37,7 +36,7 @@ checkdepends=(
 source=(https://github.com/protocolbuffers/protobuf/archive/v$pkgver/$pkgname-$pkgver.tar.gz
         https://github.com/protocolbuffers/protobuf/commit/2e62ef1e.patch)
 sha512sums=('a3a555f17a069dd4aa0d683d3126915077fe4211ae6532a4947fb76a9eeb1ed7d25d29ada8dc372435a08aad1aa14374d88e92ac7c195510f57609efaf9d341d'
-            'f42d9bd702abe2c7fc4dcb07d050376287ac60b0b7e2fde0d7a9e9df24a620866bee5fd7de2e3b216095376de47e1fe7443cca74c9a9e85c1a0bc42e8973a280')
+            '18bc71031bbcbc3810a9985fa670465040f06a6c104ab8079b56bdfc499bb6cec40805a0cefd455031142490a576dc60aa8000523877ac0353b93558e9beabbd')
 
 prepare() {
   patch -d $pkgname-$pkgver -p1 < 2e62ef1e.patch # Fix cmake config compatibility mode
@@ -60,8 +59,8 @@ build() {
   cmake "${cmake_options[@]}"
   cmake --build build --verbose
 
-  cd "$pkgbase-$pkgver"
-  bazel build //python/dist:binary_wheel
+  cd "$pkgbase-5.$pkgver"
+  python -m build --wheel --no-isolation
 }
 
 check() {
@@ -89,6 +88,9 @@ package_python-protobuf() {
     'python'
   )
 
-  python -m installer --destdir="$pkgdir" "$pkgbase-$pkgver"/bazel-bin/python/dist/*.whl
+  python -m installer --destdir="$pkgdir" "$pkgbase-5.$pkgver"/dist/*.whl
   install -vDm 644 $pkgbase-$pkgver/LICENSE -t "$pkgdir/usr/share/licenses/$pkgname/"
 }
+
+source+=("$pkgbase-$pkgver-python.tar.gz::https://files.pythonhosted.org/packages/source/${pkgbase::1}/${pkgbase//-/_}/${pkgbase//-/_}-5.$pkgver.tar.gz")
+sha512sums+=('3462518edf957582cbbd8caaa7507970339788ecde8b934b0466976cbe8bfb4aecc8690b9f6d900ea84d3084bce52ec0fd5764de862dc4839d461ef7bde63741')
