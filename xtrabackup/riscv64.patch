diff --git a/PKGBUILD b/PKGBUILD
index 06ab976..99137ec 100644
--- PKGBUILD
+++ PKGBUILD
@@ -9,26 +9,31 @@ pkgdesc='Non-blocking backup tool for MySQL'
 arch=('x86_64')
 url='https://www.percona.com/software/mysql-database/percona-xtrabackup'
 license=('GPL')
-depends=('libaio' 'libev' 'libgcrypt' 'curl' 'perl-dbd-mysql' 'numactl' 'protobuf' 'libprocps' 'icu' 'zlib' 'zstd' 'lz4')
-makedepends=('cmake' 'python-sphinx' 'vim' 'libedit' 'libevent' 'libfido2')
+depends=('libaio' 'libev' 'libgcrypt' 'curl' 'perl-dbd-mysql' 'numactl' 'protobuf' 'icu' 'zlib' 'zstd' 'lz4')
+makedepends=('cmake' 'python-sphinx' 'vim' 'libedit' 'libevent' 'libfido2' 'clang')
 optdepends=('qpress: for compressed backups')
+options=('!lto')
 source=("https://www.percona.com/downloads/Percona-XtraBackup-LATEST/Percona-XtraBackup-${pkgver//_/-}/source/tarball/percona-xtrabackup-${pkgver//_/-}.tar.gz"
         "https://boostorg.jfrog.io/artifactory/main/release/$_boost_ver/source/boost_${_boost_ver//./_}.tar.gz"
-        "mysql-build-fix.patch")
+        "mysql-build-fix.patch"
+        "add-riscv-support.patch::https://patch-diff.githubusercontent.com/raw/percona/percona-xtrabackup/pull/1443.diff")
 
 sha256sums=('64b3b0ecaab5a5ee50af02ec40f12664bfe4c94f929ff0c189705ae886da0b12'
             '5347464af5b14ac54bb945dc68f1dd7c56f0dad7262816b956138fc53bcc0131'
-            'e99733bad4d66ccb87cd87be4f030023184fba54bfc354b018773372bbf0ddf1')
+            'e99733bad4d66ccb87cd87be4f030023184fba54bfc354b018773372bbf0ddf1'
+            '08ffa60b8370a760d35744919729d66e1714c49322aaca810e9e57ff951c582b')
 
 prepare() {
   mkdir build
 
   cd percona-xtrabackup-${pkgver//_/-}
   patch -p1 -i ../mysql-build-fix.patch
+  patch -Np1 -i ../add-riscv-support.patch
 }
 
 build() {
   cd build
+  export CC=clang CXX=clang++ CFLAGS="${CFLAGS//-fstack-clash-protection/}" CXXFLAGS="${CXXFLAGS//-fstack-clash-protection/}"
   cmake -DBUILD_CONFIG=xtrabackup_release \
         -DCMAKE_BUILD_TYPE=Release \
         -DMYSQL_DATADIR=/var/lib/mysql \
